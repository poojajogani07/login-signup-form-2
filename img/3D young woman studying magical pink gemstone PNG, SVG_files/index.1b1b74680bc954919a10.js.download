(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1416:function(e,t,r){var content=r(1483);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("400adfa7",content,!0,{sourceMap:!1})},1482:function(e,t,r){"use strict";r(1416)},1483:function(e,t,r){var o=r(10)((function(i){return i[1]}));o.push([e.i,".categories-page[data-v-672a7c16]{padding-top:32px}.categories-page[data-v-672a7c16] h1{margin-bottom:0}.categories-page .index-page[data-v-672a7c16]{padding-top:32px}@media(max-width:768px){.categories-page .index-page[data-v-672a7c16]{padding-top:29px}}@media(max-width:480px){.categories-page .index-page[data-v-672a7c16]{padding-top:24px}}.categories-page .index-page[data-v-672a7c16] .mobile .dropdown .active-item{justify-content:center}.categories-page .index-page .mobile-description[data-v-672a7c16]{display:none;margin-top:56px}@media(max-width:400px){.categories-page .index-page .mobile-description[data-v-672a7c16]{align-items:center;display:flex;flex-direction:column}}.categories-page .index-page .mobile-description img[data-v-672a7c16]{margin-bottom:24px;max-width:280px}.categories-page[data-v-672a7c16] .content{margin-top:0;padding:0}.categories-page main[data-v-672a7c16]{padding-bottom:32px}@media(max-width:980px){.categories-page main[data-v-672a7c16]{padding-top:24px}}",""]),o.locals={},e.exports=o},1619:function(e,t,r){"use strict";r.r(t);r(15),r(12),r(18),r(14),r(19);var o=r(4),n=r(9),c=r(7),l=(r(44),r(40),r(13),r(6),r(17),r(148)),d=r(27);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"CategoriesPage",mixins:[l.a],layout:"content",data:function(){return{categoriesPreviews:[],locale:this.$i18n.localeProperties.iso,perPage:8,total:0}},computed:{allCategories:function(){return this.$store.state.categories.all},computedCategoriesPreviews:function(){var e=this.categoriesPreviews.map((function(e){return{icon:e.icon,prettyId:e.pretty_id,previews:e.random_previews,title:e.title,total:e.illustrations_count}}));return e.length?e:[]},title:function(){return this.$t("OUCH_V2.ALL_CATEGORIES")}},mounted:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.updateSEO(),e.fetchCategories(),e.fetchCategoriesPreviews();case 3:case"end":return t.stop()}}),t)})))()},methods:{fetch:function(){this.nextPage("categoriesPreviews",{locale:this.locale,random_previews_count:9})},fetchCategories:function(){var e=this;this.allCategories.length?this.$store.dispatch("setCurrentCategories",Object(n.a)(this.allCategories)):this.$categoriesRepository.index({locale:this.locale}).then((function(t){var r=(null==t?void 0:t.categories)||[];e.$store.dispatch("setCategories",r),e.$store.dispatch("setCurrentCategories",r)}))},fetchCategoriesPreviews:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var r,o,c,l,h,f,m,x,w,y,O,P,C,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h={page:1,per_page:8,random_previews_count:9,locale:e.locale},t.prev=1,t.next=4,e.$store.dispatch("cache/get",{key:v(v({},h),{},{keyType:"category-previews"})});case 4:if(!(f=t.sent)){t.next=9;break}l=f,t.next=13;break;case 9:return t.next=11,e.$categoriesPreviewsRepository.index(h);case 11:l=t.sent,e.$store.dispatch("cache/set",{key:v(v({},h),{},{keyType:"category-previews"}),value:l});case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.error(t.t0);case 18:return x={sort_by:"new",page:1,per_page:9,type:"illustrations",locale:e.locale},t.prev=19,t.next=22,e.$store.dispatch("cache/get",{key:v(v({},x),{},{keyType:"new-illustrations"})});case 22:if(!(w=t.sent)){t.next=27;break}m=w,t.next=31;break;case 27:return t.next=29,e.$illustrationsRepository.index(x);case 29:m=t.sent,e.$store.dispatch("cache/set",{key:v(v({},x),{},{keyType:"new-illustrations"}),value:m});case 31:t.next=36;break;case 33:t.prev=33,t.t1=t.catch(19),console.error(t.t1);case 36:y=Date.now(),O=((null===(r=m)||void 0===r?void 0:r.illustrations)||[]).filter((function(e){return Math.floor((y-e.created_at)/864e5)<31})),P=(null==O?void 0:O.length)||0,C={icon:"star",pretty_id:d.t,title:e.$i18n.t("OUCH.SUBJECTS.NEW_ILLUSTRATIONS"),illustrations_count:P,random_previews:O||[]},_=(null===(o=l)||void 0===o?void 0:o.categories)||[],e.categoriesPreviews=P?[C].concat(Object(n.a)(_)):_,e.total=((null===(c=l)||void 0===c?void 0:c.total)||0)+1;case 43:case"end":return t.stop()}}),t,null,[[1,15],[19,33]])})))()},updateSEO:function(){this.$store.dispatch("updateSEO",{title:this.$i18n.t("OUCH_V2.SEO.CATEGORIES_PAGE.TITLE"),description:this.$i18n.t("OUCH_V2.SEO.CATEGORIES_PAGE.DESCRIPTION"),image:"".concat("https://maxst.icons8.com","/vue-static/ouch/seo/opengraph.png")})}}},m=f,x=(r(1482),r(3)),component=Object(x.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"categories-page container"},[t("ouch-seo-header",{attrs:{title:e.title,showTagsBar:!1}}),t("div",{staticClass:"index-page"},[t("div",{staticClass:"content container"},[t("aside",[t("ouch-category-list")],1),t("main",[t("ouch-category-previews-list",{attrs:{categories:e.computedCategoriesPreviews}}),e.page*e.perPage<this.total?t("ouch-pagination",{attrs:{entity:"categoriesPreviews",page:e.page,perPage:e.perPage,loading:e.nextPageLoading,total:e.total},on:{nextPage:e.fetch}}):e._e()],1)])])],1)}),[],!1,null,"672a7c16",null);t.default=component.exports}}]);
//# sourceMappingURL=index.1b1b74680bc954919a10.js.map